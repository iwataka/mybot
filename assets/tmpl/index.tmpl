{{{define "index"}}}
<!DOCTYPE html>
<html lang="en">
{{{template "header" .}}}
<body>
    <div class="container">
        {{{template "navbar" .}}}

        <div class="jumbotron">
            <h1>Mybot</h1>
            <h2 class="lead">automatically collect and broadcast any kinds of information for you</h2>
        </div>

        <!-- Vision API result -->
        <div class="panel panel-info">
            <div class="panel-heading">
                {{{if .ImageAnalysisDate}}}
                <h3 class="panel-title">Google Vision API Result ({{{.ImageAnalysisDate}}})</h3>
                {{{else}}}
                <h3 class="panel-title">Google Vision API Result</h3>
                {{{end}}}
            </div>
            <div class="panel-body">
                {{{if .ImageURL}}}
                <div class="row">
                    <div class="col-md-6">
                        <a href="{{{.ImageSource}}}"><img src="{{{.ImageURL}}}" class="img-responsive", alt="Image analyzed by Google Vision API"></a>
                    </div>
                    <div class="col-md-6" style="overflow:auto;max-height:480px">
                        <pre><code>{{{.ImageAnalysisResult}}}</code></pre>
                    </div>
                </div>
                {{{else}}}
                <em>Nothing to show</em>
                {{{end}}}
            </div>
        </div>

        <!-- Healthcheck table -->
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <td>Process</td>
                        <td>Healthcheck Result</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Twitter Direct Message Listener</td>
                        <td>
                            {{{if eq .TwitterListenDMStatus true}}}
                            <h4><span class="label label-success" id="twitter-dm-listener-status">Active</span></h4>
                            {{{else}}}
                            <h4><span class="label label-danger" id="twitter-dm-listener-status">Stop</span></h4>
                            {{{end}}}
                        </td>
                    </tr>
                    <tr>
                        <td>Twitter User Listener</td>
                        <td>
                            {{{if eq .TwitterListenUsersStatus true}}}
                            <h4><span class="label label-success" id="twitter-user-listener-status">Active</span></h4>
                            {{{else}}}
                            <h4><span class="label label-danger" id="twitter-user-listener-status">Stop</span></h4>
                            {{{end}}}
                        </td>
                    </tr>
                    <tr>
                        <td>Twitter Periodic Job</td>
                        <td>
                            {{{if eq .TwitterPeriodicStatus true}}}
                            <h4><span class="label label-success" id="twitter-periodic-job-status">Active</span></h4>
                            {{{else}}}
                            <h4><span class="label label-danger" id="twitter-periodic-job-status">Stop</span></h4>
                            {{{end}}}
                        </td>
                    </tr>
                    <tr>
                        <td>Slack Listener</td>
                        <td>
                            {{{if eq .SlackListenerStatus true}}}
                            <h4><span class="label label-success" id="slack-listener-status">Active</span></h4>
                            {{{else}}}
                            <h4><span class="label label-danger" id="slack-listener-status">Stop</span></h4>
                            {{{end}}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
{{{end}}}
