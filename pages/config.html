<!DOCTYPE html>
<html lang="en">
{{template "header" .}}
<body>
    <div class="container">
        {{template "navbar" .}}
        <form action="/config/" method="post" enctype="multipart/form-data">
            <h2>Current Config</h2>
            <input type="submit" value="Save" class="btn btn-lg btn-primary">

            <h3>Twitter Timelines</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>screen names</td>
                        <td>exclude replies</td>
                        <td>include rts</td>
                        <td>count</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    {{range $index, $timeline := .Config.Twitter.Timelines}}
                    <tr>
                        <td>
                            {{listTextbox $timeline.ScreenNames "twitter.timelines.screen_names"}}
                        </td>
                        <td>
                            {{boolSelectbox $timeline.ExcludeReplies "twitter.timelines.exclude_replies"}}
                        </td>
                        <td>
                            {{boolSelectbox $timeline.IncludeRts "twitter.timelines.include_rts"}}
                        </td>
                        <td>
                            <input type="number" name="twitter.timelines.count" value="{{$timeline.Count}}">
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#twitter-timelines-filter_{{$index}}">
                                details here
                            </button>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>

            {{range $index, $timeline := .Config.Twitter.Timelines}}
                <div class="modal fade" id="twitter-timelines-filter_{{$index}}" tabindex="-1" role="dialog" aria-labelledby="twitter-timelines-filter_{{$index}}-title">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" id="twitter-timelines-filter_{{$index}}-title">Details</h3>
                            </div>
                            <div class="modal-body">
                                <h3>Filter</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>patterns</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.Patterns "twitter.timelines.filter.patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>url patterns</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.URLPatterns "twitter.timelines.filter.url_patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has media</td>
                                            <td>
                                                {{boolSelectbox $timeline.Filter.HasMedia "twitter.timelines.filter.has_media"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has url</td>
                                            <td>
                                                {{boolSelectbox $timeline.Filter.HasURL "twitter.timelines.filter.has_url"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted</td>
                                            <td>
                                                {{boolSelectbox $timeline.Filter.Retweeted "twitter.timelines.filter.retweeted"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite threshold</td>
                                            <td>
                                                <input type="number" name="twitter.timelines.filter.favorite_threshold" value="{{$timeline.Filter.FavoriteThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted threshold</td>
                                            <td>
                                                <input type="number" name="twitter.timelines.filter.retweeted_threshold" value="{{$timeline.Filter.RetweetedThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>lang</td>
                                            <td>
                                                <input type="text" name="twitter.timelines.filter.lang" value="{{$timeline.Filter.Lang}}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Filter.Vision</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>label</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.Vision.Label "twitter.timelines.filter.vision.label"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face anger likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.timelines.filter.vision.face.anger_likelihood" value="{{$timeline.Filter.Vision.Face.AngerLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face blurred likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.timelines.filter.vision.face.blurred_likelihood" value="{{$timeline.Filter.Vision.Face.BlurredLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face headwear likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.timelines.filter.vision.face.headwear_likelihood" value="{{$timeline.Filter.Vision.Face.HeadwearLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face joy likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.timelines.filter.vision.face.joy_likelihood" value="{{$timeline.Filter.Vision.Face.JoyLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>text</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.Vision.Text "twitter.timelines.filter.vision.text"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>landmark</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.Vision.Landmark "twitter.timelines.filter.vision.landmark"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>logo</td>
                                            <td>
                                                {{listTextbox $timeline.Filter.Vision.Logo "twitter.timelines.filter.vision.logo"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Action</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>retweet</td>
                                            <td>
                                                {{checkbox $timeline.Action.Retweet "twitter.timelines.action.retweet"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite</td>
                                            <td>
                                                {{checkbox $timeline.Action.Favorite "twitter.timelines.action.favorite"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>follow</td>
                                            <td>
                                                {{checkbox $timeline.Action.Follow "twitter.timelines.action.follow"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>collections</td>
                                            <td>
                                                {{listTextbox $timeline.Action.Collections "twitter.timelines.action.collections"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div>
                    </div>
                </div>
            {{end}}

            <h3>Twitter Favorites</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>screen names</td>
                        <td>count</td>
                        <td>others</td>
                    </tr>
                </thead>
                <tbody>
                    {{range $index, $favorite := .Config.Twitter.Favorites}}
                    <tr>
                        <td>
                            {{listTextbox $favorite.ScreenNames "twitter.favorites.screen_names"}}
                        </td>
                        <td><input type="number" name="twitter.favorites.count" value="{{$favorite.Count}}"></td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#twitter-favorites-filter_{{$index}}">
                                details here
                            </button>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>

            {{range $index, $favorite := .Config.Twitter.Favorites}}
                <div class="modal fade" id="twitter-favorites-filter_{{$index}}" tabindex="-1" role="dialog" aria-labelledby="twitter-favorites-filter_{{$index}}-title">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" id="twitter-favorites-filter_{{$index}}-title">Details</h3>
                            </div>
                            <div class="modal-body">
                                <h3>Filter</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>patterns</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.Patterns "twitter.favorites.filter.patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>url patterns</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.URLPatterns "twitter.favorites.filter.url_patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has media</td>
                                            <td>
                                                {{boolSelectbox $favorite.Filter.HasMedia "twitter.favorites.filter.has_media"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has url</td>
                                            <td>
                                                {{boolSelectbox $favorite.Filter.HasURL "twitter.favorites.filter.has_url"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted</td>
                                            <td>
                                                {{boolSelectbox $favorite.Filter.Retweeted "twitter.favorites.filter.retweeted"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite threshold</td>
                                            <td>
                                                <input type="number" name="twitter.favorites.filter.favorite_threshold" value="{{$favorite.Filter.FavoriteThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted threshold</td>
                                            <td>
                                                <input type="number" name="twitter.favorites.filter.retweeted_threshold" value="{{$favorite.Filter.RetweetedThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>lang</td>
                                            <td>
                                                <input type="text" name="twitter.favorites.filter.lang" value="{{$favorite.Filter.Lang}}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Filter.Vision</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>label</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.Vision.Label "twitter.favorites.filter.vision.label"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face anger likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.favorites.filter.vision.face.anger_likelihood" value="{{$favorite.Filter.Vision.Face.AngerLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face blurred likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.favorites.filter.vision.face.blurred_likelihood" value="{{$favorite.Filter.Vision.Face.BlurredLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face headwear likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.favorites.filter.vision.face.headwear_likelihood" value="{{$favorite.Filter.Vision.Face.HeadwearLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face joy likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.favorites.filter.vision.face.joy_likelihood" value="{{$favorite.Filter.Vision.Face.JoyLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>text</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.Vision.Text "twitter.favorites.filter.vision.text"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>landmark</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.Vision.Landmark "twitter.favorites.filter.vision.landmark"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>logo</td>
                                            <td>
                                                {{listTextbox $favorite.Filter.Vision.Logo "twitter.favorites.filter.vision.logo"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Action</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>retweet</td>
                                            <td>
                                                {{checkbox $favorite.Action.Retweet "twitter.favorites.action.retweet"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite</td>
                                            <td>
                                                {{checkbox $favorite.Action.Favorite "twitter.favorites.action.favorite"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>follow</td>
                                            <td>
                                                {{checkbox $favorite.Action.Follow "twitter.favorites.action.follow"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>collections</td>
                                            <td>
                                                {{listTextbox $favorite.Action.Collections "twitter.favorites.action.collections"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div>
                    </div>
                </div>
            {{end}}

            <h3>Twitter Searches</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>queries</td>
                        <td>result type</td>
                        <td>count</td>
                        <td>others</td>
                    </tr>
                </thead>
                <tbody>
                    {{range $index, $search := .Config.Twitter.Searches}}
                    <tr>
                        <td>
                            {{listTextbox $search.Queries "twitter.searches.queries"}}
                        </td>
                        <td>
                            {{selectbox $search.ResultType "twitter.searches.result_type" "" "recent" "mixed" "popular"}}
                        </td>
                        <td><input type="number" name="twitter.searches.count" value="{{$search.Count}}"></td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#twitter-searches-filter_{{$index}}">
                                details here
                            </button>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>

            {{range $index, $search := .Config.Twitter.Searches}}
                <div class="modal fade" id="twitter-searches-filter_{{$index}}" tabindex="-1" role="dialog" aria-labelledby="twitter-searches-filter_{{$index}}-title">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title" id="twitter-searches-filter_{{$index}}-title">Details</h3>
                            </div>
                            <div class="modal-body">
                                <h3>Filter</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>patterns</td>
                                            <td>
                                                {{listTextbox $search.Filter.Patterns "twitter.searches.filter.patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>url patterns</td>
                                            <td>
                                                {{listTextbox $search.Filter.URLPatterns "twitter.searches.filter.url_patterns"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has media</td>
                                            <td>
                                                {{boolSelectbox $search.Filter.HasMedia "twitter.searches.filter.has_media"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>has url</td>
                                            <td>
                                                {{boolSelectbox $search.Filter.HasURL "twitter.searches.filter.has_url"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted</td>
                                            <td>
                                                {{boolSelectbox $search.Filter.Retweeted "twitter.searches.filter.retweeted"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite threshold</td>
                                            <td>
                                                <input type="number" name="twitter.searches.filter.favorite_threshold" value="{{$search.Filter.FavoriteThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>retweeted threshold</td>
                                            <td>
                                                <input type="number" name="twitter.searches.filter.retweeted_threshold" value="{{$search.Filter.RetweetedThreshold}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>lang</td>
                                            <td>
                                                <input type="text" name="twitter.searches.filter.lang" value="{{$search.Filter.Lang}}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Filter.Vision</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>label</td>
                                            <td>
                                                {{listTextbox $search.Filter.Vision.Label "twitter.searches.filter.vision.label"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face anger likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.searches.filter.vision.face.anger_likelihood" value="{{$search.Filter.Vision.Face.AngerLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face blurred likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.searches.filter.vision.face.blurred_likelihood" value="{{$search.Filter.Vision.Face.BlurredLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face headwear likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.searches.filter.vision.face.headwear_likelihood" value="{{$search.Filter.Vision.Face.HeadwearLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>face joy likelihood</td>
                                            <td>
                                                <input type="text" name="twitter.searches.filter.vision.face.joy_likelihood" value="{{$search.Filter.Vision.Face.JoyLikelihood}}">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>text</td>
                                            <td>
                                                {{listTextbox $search.Filter.Vision.Text "twitter.searches.filter.vision.text"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>landmark</td>
                                            <td>
                                                {{listTextbox $search.Filter.Vision.Landmark "twitter.searches.filter.vision.landmark"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>logo</td>
                                            <td>
                                                {{listTextbox $search.Filter.Vision.Logo "twitter.searches.filter.vision.logo"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <h3>Action</h3>
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <td>name</td>
                                            <td>value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>retweet</td>
                                            <td>
                                                {{checkbox $search.Action.Retweet "twitter.searches.action.retweet"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>favorite</td>
                                            <td>
                                                {{checkbox $search.Action.Favorite "twitter.searches.action.favorite"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>follow</td>
                                            <td>
                                                {{checkbox $search.Action.Follow "twitter.searches.action.follow"}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>collections</td>
                                            <td>
                                                {{listTextbox $search.Action.Collections "twitter.searches.action.collections"}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div>
                    </div>
                </div>
            {{end}}

            <h3>Database</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>driver</td>
                        <td>data source</td>
                        <td>vision table</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="text" name="db.driver" value="{{.Config.DB.Driver}}">
                        </td>
                        <td>
                            <input type="text" name="db.data_source" value="{{.Config.DB.DataSource}}">
                        </td>
                        <td>
                            <input type="text" name="db.vision_table" value="{{.Config.DB.VisionTable}}">
                        </td>
                    </tr>
                </tbody>
            </table>

            <h3>Interaction</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>duration</td>
                        <td>allow self</td>
                        <td>users</td>
                        <td>count</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="text" name="interaction.duration" value="{{if .Config.Interaction.Duration}}{{.Config.Interaction.Duration}}{{end}}">
                        </td>
                        <td>
                            {{checkbox .Config.Interaction.AllowSelf "interaction.allow_self"}}
                        </td>
                        <td>
                            {{listTextbox .Config.Interaction.Users "interaction.users"}}
                        </td>
                        <td>
                            <input type="number" name="interaction.count" value="{{.Config.Interaction.Count}}">
                        </td>
                    </tr>
                </tbody>
            </table>

            <h3>Log</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>allow self</td>
                        <td>users</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            {{checkbox .Config.Log.AllowSelf "log.allow_self"}}
                        </td>
                        <td>
                            {{listTextbox .Config.Log.Users "log.users"}}
                        </td>
                    </tr>
                </tbody>
            </table>

            <h3>HTTP</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                    <tr>
                        <td>name</td>
                        <td>host</td>
                        <td>port</td>
                        <td>enabled</td>
                        <td>log lines</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="text" name="http.name" value="{{.Config.HTTP.Name}}">
                        </td>
                        <td>
                            <input type="text" name="http.host" value="{{.Config.HTTP.Host}}">
                        </td>
                        <td>
                            <input type="number" name="http.port" value="{{.Config.HTTP.Port}}">
                        </td>
                        <td>
                            {{checkbox .Config.HTTP.Enabled "http.enabled"}}
                        </td>
                        <td>
                            <input type="number" name="http.log_lines" value="{{.Config.HTTP.LogLines}}">
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
</body>
</html>
